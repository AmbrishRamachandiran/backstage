## API Report File for "@backstage/backend-defaults"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AuthService } from '@backstage/backend-plugin-api';
import { BackstagePrincipalAccessRestrictions } from '@backstage/backend-plugin-api';
import { Config } from '@backstage/config';
import { ServiceFactory } from '@backstage/backend-plugin-api';
import { ServiceRef } from '@backstage/backend-plugin-api';

// @public (undocumented)
export type AccessRestrictionsMap = Map<
  string, // plugin ID
  BackstagePrincipalAccessRestrictions
>;

// @public
export const authServiceFactory: ServiceFactory<
  AuthService,
  'plugin',
  'singleton'
>;

// @public
export const externalTokenTypeHandlersRef: ServiceRef<
  TokenTypeHandler,
  'plugin',
  'multiton'
>;

// @public
export interface PluginTokenHandler {
  // (undocumented)
  issueToken(options: {
    pluginId: string;
    targetPluginId: string;
    onBehalfOf?: {
      limitedUserToken: string;
      expiresAt: Date;
    };
  }): Promise<{
    token: string;
  }>;
  // (undocumented)
  verifyToken(token: string): Promise<
    | {
        subject: string;
        limitedUserToken?: string;
      }
    | undefined
  >;
}

// @public
export const pluginTokenHandlerDecoratorServiceRef: ServiceRef<
  (defaultImplementation: PluginTokenHandler) => PluginTokenHandler,
  'plugin',
  'singleton'
>;

// @public
export interface ExternalTokenHandler {
  // (undocumented)
  verifyToken(token: string): Promise<
    | {
        subject: string;
        allAccessRestrictions?: AccessRestrictionsMap;
      }
    | undefined
  >;
}

// @public
export interface TokenTypeHandler {
  factory: (configs: Config[]) => TokenHandler | TokenHandler[];
  // (undocumented)
  type: string;
}

// (No @packageDocumentation comment for this package)
```
